<div class="cameras-container">
  <h2 class="title">Cameras</h2>

  <!-- Selector de c치maras -->
  <select class="camera-select" (change)="onCameraSelect($event)">
    <option value="" disabled selected>Select a camera</option>
    <option *ngFor="let camera of cameras" [value]="camera.id">{{ camera.name }}</option>
  </select>

  <div class="camera-content">
    <!-- Secci칩n izquierda -->
    <div class="camera-left">
      <div class="camera-preview" *ngIf="selectedCamera">
        <h3>{{ selectedCamera.name }}</h3>
        <div class="camera-simulation">
          <!-- Webcam simulada usando ngx-webcam -->
          <webcam
            [trigger]="triggerObservable"
            (imageCapture)="handleImage($event)"
            (initError)="handleInitError($event)"
          ></webcam>
          
          <!-- Mostrar la imagen capturada -->
          <div *ngIf="webcamImage">
            <h3>Captured Image:</h3>
            <img [src]="webcamImage.imageAsDataUrl" alt="Captured Image" />
          </div>
          
          <!-- Bot칩n para capturar la imagen -->
          <button (click)="triggerSnapshot()">Capture Image</button>
        </div>
      </div>
    </div>

    <!-- Secci칩n derecha -->
    <div class="camera-right">
      <h4 class="safety-title">Safety</h4>
      <form class="safety-form">
        <label>
          <input type="checkbox" [(ngModel)]="safetyHelmet" name="safetyHelmet" /> Safety Helmet
        </label>
        <label>
          <input type="checkbox" [(ngModel)]="reflectiveVest" name="reflectiveVest" /> Reflective Vest
        </label>
        <label>
          <input type="checkbox" [(ngModel)]="safetyGloves" name="safetyGloves" /> Safety Gloves
        </label>
      </form>
      <button class="save-button" (click)="onSave()">SAVE</button>

      <!-- Alertas debajo de Safety -->
      <h4 class="alerts-title">Alerts</h4>
      <div class="alerts-list">
        <div *ngFor="let alert of alertsToday" class="alert-item">
          <div class="alert-time">{{ alert.time }} - {{ alert.incidentType }}</div>
        </div>
      </div>
    </div>
  </div>
</div>
